<style>input[name="programador[sexo]"],input[name="programador[lenguajes_programacion][]"],label[for="programador_certificado"]{    float:left;    margin-right: 5px;}</style><div class="nav navbar-inner">    <h2 class="span7 pull-left">Adicionar Programadores</h2>   </div><form class="" action="{{ path('samples_programadores_ajax_multiple_adicionar_programador')}}" method="post" {{ form_enctype(form) }}>    <div class="span4">    <div class="control-group">        <label class="control-label">{{ form_label(form.ci) }}</label>        <div class="controls">            {{ form_widget(form.ci) }} <div class="error">{{ form_errors(form.ci) }}</div>        </div>    </div>        <div class="control-group">        <label class="control-label">{{ form_label(form.nombre) }}</label>        <div class="controls">            {{ form_widget(form.nombre) }} <div class="error">{{ form_errors(form.nombre) }}</div>        </div>    </div>        <div class="control-group">        <label class="control-label">{{ form_label(form.apellido1) }}</label>        <div class="controls">            {{ form_widget(form.apellido1) }} <div class="error">{{ form_errors(form.apellido1) }}</div>        </div>    </div>        <div class="control-group">        <label class="control-label">{{ form_label(form.apellido2) }}</label>        <div class="controls">            {{ form_widget(form.apellido2) }} <div class="error">{{ form_errors(form.apellido2) }}</div>        </div>    </div>        <div class="control-group">        <label class="control-label">{{ form_label(form.fecha_nacimiento) }}</label>        <div class="controls">            {{ form_widget(form.fecha_nacimiento) }} <div class="error">{{ form_errors(form.fecha_nacimiento) }}</div>        </div>    </div>    </div>    <div class="span4">    <div class="control-group">        <label class="control-label">{{ form_label(form.sexo) }}</label>        <div class="controls">            {{ form_widget(form.sexo) }} <div class="error">{{ form_errors(form.sexo) }}</div>        </div>    </div>        <div class="control-group">        <label class="control-label">{{ form_label(form.certificado) }}</label>        <div class="controls">            {{ form_widget(form.certificado) }} <div class="error">{{ form_errors(form.certificado) }}</div>        </div>    </div>        <div class="control-group">        <label class="control-label">{{ form_label(form.sistema_operativo) }}</label>        <div class="controls">            {{ form_widget(form.sistema_operativo) }} <div class="error">{{ form_errors(form.sistema_operativo) }}</div>        </div>    </div>        <div class="control-group">        <label class="control-label">{{ form_label(form.lenguajes_programacion) }}</label>        <div class="controls">            {{ form_widget(form.lenguajes_programacion) }} <div class="error">{{ form_errors(form.lenguajes_programacion) }}</div>        </div>    </div>    </div>    {{ form_widget(form) }}        <div class="control-group pull-right">        <div class="controls">            <button type="reset" class="btn" id="reset-form-button"><i class="icon-retweet"></i> Limpiar</button>            <button type="submit" class="btn btn-primary"><i class="icon-plus-sign"></i> Adicionar</button>        </div>    </div></form><table class="table table-bordered table-hover table-striped"><thead>    <th>NOMBRE</th>    <th>SISTEMA OPERATIVO</th>    <th>LENGUAJES</th>    <th>#</th></thead><tbody id="table_body_lista_programadores"></tbody></table><hr><button type="button" class="btn btn-danger pull-right" id="send_alls_button"><i class="icon-share"></i> ENVIAR TODOS</button><script type="text/javascript">$(function(){        // permite solo numeros en campos de texto CI    $('#{{form.ci.vars.id}}').keypress(function(event)    {        var key = window.Event ? event.which : event.keyCode; // alert(key);		        return (key <= 13 || (key >= 37 && key <= 40) || (key >= 48 && key <= 57) || key == 46 );    });    // campo fecha se convierte en datepicker        $('#{{form.fecha_nacimiento.vars.id}}').datepicker({dateFormat: 'yy-mm-dd'});    // validando el formulario        $('form').submit(function( event ) {       // evitar el submit del formulario       event.preventDefault();       event.stopPropagation();               if (isNaN( $('#{{form.ci.vars.id}}').val() ) || $('#{{form.ci.vars.id}}').val().length!=11)        {            alert('El campo [{{form.ci.vars.label}}] debe estar formado por 11 números');            $('#{{form.ci.vars.id}}').focus();        }                else if ( $('#{{form.sistema_operativo.vars.id}}').val()=="") // si no es un numero        {            alert('El campo [{{form.sistema_operativo.vars.label}}] debe ser seleccionado');            $('#{{form.ci.vars.id}}').focus();        }                else if ( $('input[name="programador[lenguajes_programacion][]"]:checked').length<1) // si no es un numero        {            alert('El campo [{{form.lenguajes_programacion.vars.label}}] debe ser seleccionado');            $('#{{form.ci.vars.id}}').focus();        }        else        {           // todo ok para adicionar a la lista de la tabla                 var tr=document.createElement("tr");		 var td1=document.createElement("td");		 var td2=document.createElement("td");		 var td3=document.createElement("td");		 var td4=document.createElement("td");				                 var programador = new Object();                 		 programador.id               = null;		 programador.ci               = $('#{{form.ci.vars.id}}').val();		 programador.nombre           = $('#{{form.nombre.vars.id}}').val();		 programador.apellido1        = $('#{{form.apellido1.vars.id}}').val();		 programador.apellido2        = $('#{{form.apellido2.vars.id}}').val();		 programador.fecha_nacimiento = $('#{{form.fecha_nacimiento.vars.id}}').val();		 programador.sexo             = $('input[name="programador[sexo]"]:checked').val();		 programador.certificado      = $('input[name="programador[certificado]:checked"]').val()?1:0;		 programador.sistema_id       = $('#{{form.sistema_operativo.vars.id}} :selected').val();		 programador.lenguajes_ids    = new Array();                                                        var lenguajes_seleccionados = $('input[name="programador[lenguajes_programacion][]"]:checked');                 var lenguajes_nombres = new Array();                 $.each(lenguajes_seleccionados, function(i,lenguaje)                 {                     programador.lenguajes_ids.push(lenguajes_seleccionados[i].value)                     lenguajes_nombres.push( $(lenguajes_seleccionados[i]).next().html());                 });		/* TAMBIEN PUDO HABERSE HECHO ASI:		 var programador = {		                       id: null,                                       ci: $('#{{form.ci.vars.id}}').val(),                                       nombre: $('#{{form.nombre.vars.id}}').val(),                                       apellido1: $('#{{form.apellido1.vars.id}}').val(),                                       apellido2: $('#{{form.apellido2.vars.id}}').val(),                                       fecha_nacimiento: $('#{{form.fecha_nacimiento.vars.id}}').val(),                                       sexo: $('input[name="programador[sexo]"]:checked').val(),                                       certificado: $('input[name="programador[certificado]:checked"]').val(),				                       sistema_id: $("#sistema_id").val(),                                       lenguajes_ids: lenguajes_ids		                   };		*/		$(td1).html(programador.nombre+" "+programador.apellido1+" "+programador.apellido2);		$(td2).html($('#{{form.sistema_operativo.vars.id}} :selected').text());		$(td3).html(lenguajes_nombres.join(", "));                		var a=$('<a href="#remove-item">eliminar</a>');		                $(a).click(function(evnt){                      evnt.preventDefault();                      evnt.stopPropagation();                      if (confirm('¿Está seguro que desea eliminar este elemento?'))                          $(this).parent().parent().remove();                });                		$(td4).append(a);		                		$(tr).append(td1);		$(tr).append(td2);		$(tr).append(td3);		$(tr).append(td4);				                $(tr).data("programador", programador);		$("#table_body_lista_programadores").append(tr);				$("#reset-form-button").click(); // reset el formulario          }    });    $("#send_alls_button").click(function(){              var programadoresJSON = new Array();                    $.each($("#table_body_lista_programadores tr"), function(i,tr)          {                programador = $(tr).data("programador");                                programadoresJSON.push(programador);          });                    if (programadoresJSON.length<=0)          {              alert("Debe insertar al menos un programador");              }          else          {              $("#ajax-waiting-loader").show();              $.ajax({ url: $("form").attr("action"),                      type: 'POST',                      data: "programadores="+JSON.stringify(programadoresJSON),                      async: false              })              .done(function(html){                   if (html=="OK")                   {                        alert("Datos insertados correctamente");                        $("#table_body_lista_programadores").html("");                   }                   else                   {                        alert("Revise los datos, quizas hubo algún error");                   }                   $("#ajax-waiting-loader").hide();              })              .fail(function(error){                   $("#ajax-waiting-loader").hide();                   alert(error);              });              $("#ajax-waiting-loader").hide();                    }                });});    </script>